{% extends "base.html" %}
{% load compressed i18n reviewtags %}

{% block ie6_csshacks %}
   #review-banner .banner { position: absolute; }
{% endblock %}

{% block css %}
{% compressed_css "reviews" %}
{% endblock %}

{% block scripts-post %}
<script type="text/javascript">
    $(document).ready(function() {
        if (gEditable) {
            window.reviewRequestEditor = new RB.ReviewRequestEditor({
                reviewRequest: gReviewRequest,
                fileAttachmentComments: {
{% if file_attachments %}
{%  for file_attachment in file_attachments %}
                    {{file_attachment.id}}: {% file_attachment_comments file_attachment %}{% if not forloop.last %},{% endif %}
{%  endfor %}
{% endif %}
                }
            });

            window.reviewRequestEditorView = new RB.ReviewRequestEditorView({
                el: $('.review-request')[0],
                model: reviewRequestEditor
            });

            reviewRequestEditorView.render();
        }
    });
</script>

{%  compressed_js "reviews" %}
{% endblock %}

{% block bodytag %}
{{block.super}}

{%  block review_banner %}
<div id="review-banner"{% if not review %} style="display: none;"{% endif %}>
 <div class="banner">
  <h1>{% trans "You have a pending review." %}</h1>
  <input id="review-banner-edit" type="button" value="{% trans "Edit Review" %}" />
  <input id="review-banner-publish" type="button" value="{% trans "Publish" %}" />
  <input id="review-banner-discard" type="button" value="{% trans "Discard" %}" />
 </div>
</div>
{%  endblock %}
{% endblock %}
